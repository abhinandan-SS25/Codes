atlanta = read_tsv("../data/atlanta-2018.tsv")
knitr::opts_chunk$set(echo=TRUE, message=FALSE, warning=FALSE, error=TRUE)
library(tidyverse)
library(lubridate)
source("../../scripts/viridis.R")
atlanta = read_tsv("../data/atlanta-2018.tsv")
atlanta = read_tsv("../../data/atlanta-2018.tsv")
chicago = read_csv("../../data/chicago-2018.csv")
View(chicago)
View(atlanta)
atlanta = atlanta %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date)) %>%
rename(passengers = all_total, flights = all_flights)
View(atlanta)
atlanta = atlanta %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
mutate(total_flights = sum(flights), total_passengers = sum(passengers),
wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
atlanta = read_tsv("../../data/atlanta-2018.tsv")
chicago = read_csv("../../data/chicago-2018.csv")
atlanta = atlanta %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
mutate(total_flights = sum(flights), total_passengers = sum(passengers),
wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
atl_sum = atlanta %>%
group_by(wday) %>%
summarize(avg_passengers = total(passengers)/n(), avg_flights = total_flights/n())
atl_sum = atlanta %>%
group_by(wday) %>%
summarize(avg_passengers = total_passengers/n(), avg_flights = total_flights/n())
atl_sum %>%
arrange(wday) %>%
print(n=7, c=everything())
atlanta = read_tsv("../../data/atlanta-2018.tsv")
chicago = read_csv("../../data/chicago-2018.csv")
atlanta = atlanta %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
summarize(total_flights = sum(flights), total_passengers = sum(passengers)) %>%
mutate(wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
View(atl_sum)
atl_sum = atlanta %>%
group_by(wday) %>%
summarize(avg_passengers = total_passengers/n(), avg_flights = total_flights/n())
atl_sum %>%
arrange(wday) %>%
print(n=7, c=everything())
atl_sum = atlanta %>%
group_by(wday) %>%
summarize(avg_passengers = sum(total_passengers)/n(), avg_flights = sum(total_flights)/n())
atl_sum %>%
arrange(wday) %>%
print(n=7, c=everything())
atl_sum = atlanta %>%
group_by(wday) %>%
summarize(avg_passengers = sum(total_passengers)/n(), avg_flights = sum(total_flights)/n())
atl_sum %>%
arrange(desc(wday)) %>%
print(n=7, c=everything())
atl_sum %>%
arrange(desc(avg_flights)) %>%
print(n=7, c=everything())
apr_sum = atlanta %>%
filter(month = "Apr")
apr_sum = atlanta %>%
filter(month == "Apr")
View(atl_sum)
View(apr_sum)
apr_sum = atlanta %>%
filter(month == 4)
apr_sum = atlanta %>%
filter(month == 4) %>%
arrange(desc(total_passengers)) %>%
slice.index(1)
apr_sum = atlanta %>%
filter(month == 4) %>%
arrange(desc(total_passengers)) %>%
slice(1)
apr_sum = atlanta %>%
filter(month == 4) %>%
arrange(desc(total_passengers))
apr_sum = atlanta %>%
filter(month == 4) %>%
arrange(desc(total_passengers)) %>%
slice(1)
apr_sum = atlanta %>%
filter(month == 4) %>%
arrange(desc(total_passengers)) %>%
slice(1)
apr_passengers = apr_sum %>%
select(total_passengers)
apr_week = apr_sum %>%
select(wday)
apr_passengers
apr_week
atlanta = read_tsv("../../data/atlanta-2018.tsv")
chicago = read_delim("../../data/chicago-2018.csv", delim = ";")
chicago = chicago %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
summarize(total_flights = sum(flights), total_passengers = sum(passengers)) %>%
mutate(wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
chicago = chicago %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date), all_flights = as.numeric(all_flights), all_total = as.numeric(all_total)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
summarize(total_flights = sum(flights), total_passengers = sum(passengers)) %>%
mutate(wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
chicago = chicago %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date), all_flights = as.numeric(all_flights), all_total = as.numeric(all_total)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
summarize(total_flights = sum(flights), total_passengers = sum(passengers)) %>%
mutate(wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
atlanta = read_tsv("../../data/atlanta-2018.tsv")
chicago = read_delim("../../data/chicago-2018.csv", delim = ";")
chicago = chicago %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date), all_flights = as.numeric(all_flights), all_total = as.numeric(all_total)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
summarize(total_flights = sum(flights), total_passengers = sum(passengers)) %>%
mutate(wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
chg_sum = chicago %>%
group_by(wday) %>%
summarize(avg_passengers = mean(total_passengers), avg_flights = mean(total_flights))
chicago = chicago %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date), all_flights = as.numeric(all_flights), all_total = as.numeric(all_total)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
summarize(total_flights = sum(flights), total_passengers = sum(passengers)) %>%
mutate(wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
atlanta = read_tsv("../../data/atlanta-2018.tsv")
chicago = read_delim("../../data/chicago-2018.csv", delim = ";")
chicago = chicago %>%
select(airport, date, all_total, all_flights) %>%
mutate(date = mdy(date), all_flights = as.numeric(all_flights), all_total = as.numeric(all_total)) %>%
rename(passengers = all_total, flights = all_flights) %>%
group_by(airport, date) %>%
summarize(total_flights = sum(flights), total_passengers = sum(passengers)) %>%
mutate(wday = wday(date, label = TRUE), month = month(date)) %>%
arrange(date)
chg_sum = chicago %>%
group_by(wday) %>%
summarize(avg_passengers = mean(total_passengers), avg_flights = mean(total_flights))
ggplot(chg_sum, aes(x=wday, y=avg_passengers)) +
geom_col()
